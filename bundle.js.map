{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/chart-render.js","webpack:///./src/components/abstract-component.js","webpack:///./src/components/alert.js","webpack:///./src/components/generate-button.js","webpack:///./src/components/statistics.js","webpack:///./src/const.js","webpack:///./src/data.js","webpack:///./src/main.js","webpack:///./src/utils.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.js\");\n","import {\n  GAP,\n  MAX_PERCENTAGE,\n  MIN_PERCENTAGE_FOR_RENDER,\n  INITIAL_DPI,\n  DEFAULT_COLOR,\n  BarCoordinate,\n  BarSize,\n  LabelCoordinate,\n  PercentageCoordinate,\n  Font\n} from \"./const.js\";\n\nconst chartButton = document.querySelector(`.chart__button`);\nconst canvas = document.querySelector(`#canvas`);\nconst ctx = canvas.getContext('2d');\n\nconst changeDPI = (canvas, dpi) => {\n  canvas.style.width = canvas.style.width || canvas.width + 'px';\n  canvas.style.height = canvas.style.height || canvas.height + 'px';\n\n  const width = parseFloat(canvas.style.width);\n  const height = parseFloat(canvas.style.height);\n\n  const scaleFactor = dpi / INITIAL_DPI;\n  const oldScale = canvas.width / width;\n  const backupScale = scaleFactor / oldScale;\n  const backup = canvas.cloneNode(false);\n\n  backup.getContext('2d').drawImage(canvas, 0, 0);\n\n  const ctx = canvas.getContext('2d');\n\n  canvas.width = Math.ceil(width * scaleFactor);\n  canvas.height = Math.ceil(height * scaleFactor);\n  ctx.setTransform(backupScale, 0, 0, backupScale, 0, 0);\n  ctx.drawImage(backup, 0, 0);\n  ctx.setTransform(scaleFactor, 0, 0, scaleFactor, 0, 0);\n}\n\nexport const renderChart = (projectsWithData) => {\n  changeDPI(canvas, 300);\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n  const sortedProjects = projectsWithData.slice().sort((a, b) => a.percentage - b.percentage);\n  let currentBarY = BarCoordinate.INIT_Y;\n  let currentLabelY = LabelCoordinate.INIT_Y;\n  let currentPercentageY = PercentageCoordinate.INIT_Y;\n\n  for (const project of sortedProjects) {\n    const percentage = project.percentage;\n    const barWidth = (percentage * BarSize.MAX_WIDTH) / MAX_PERCENTAGE;\n    const gap = BarSize.HEIGHT + GAP;\n\n    ctx.fillStyle = project.color;\n    ctx.font = `${Font.SIZE} ${Font.FAMILY}`;\n    ctx.fillText(`${project.name}`, LabelCoordinate.INIT_X, currentLabelY);\n    ctx.fillRect(BarCoordinate.INIT_X, currentBarY, barWidth, BarSize.HEIGHT);\n    ctx.fillStyle = DEFAULT_COLOR;\n\n    switch (true) {\n      case percentage < MIN_PERCENTAGE_FOR_RENDER:\n        ctx.fillStyle = project.color;\n        ctx.fillText(`${percentage}%`, PercentageCoordinate.INIT_X + barWidth, currentPercentageY);\n        break;\n\n      default:\n        ctx.fillText(`${percentage}%`, PercentageCoordinate.INIT_X, currentPercentageY);\n        break;\n    }\n\n    currentBarY += gap;\n    currentLabelY += gap;\n    currentPercentageY += gap;\n  }\n\n  chartButton.addEventListener(`click`, () => {\n    const imgURI = canvas.toDataURL();\n    chartButton.href = imgURI;\n  });\n};\n","import {createElement} from \"../utils\";\n\nexport default class AbstractComponent {\n  constructor() {\n    if(new.target === AbstractComponent) {\n      throw new Error(`Abstract method not implemented: getTemplate`);\n    }\n\n    this._element = null;\n  }\n\n  getTemplate() {\n    throw new Error(`Can't instantiate AbstractComponent, only concrete one.`);\n  }\n\n  getElement() {\n    if (!this._element) {\n      this._element = createElement(this.getTemplate());\n    }\n\n    return this._element;\n  }\n\n  removeElement() {\n    this._element = null;\n  }\n}\n","import AbstractComponent from \"./abstract-component.js\";\n\nexport default class Alert extends AbstractComponent {\n  getTemplate() {\n    return (\n      `<p class=\"data__alert\">Сумма должна быть равна 100%</p>`\n    );\n  }\n}\n","import AbstractComponent from \"./abstract-component.js\";\n\nexport default class GenerateButton extends AbstractComponent {\n  getTemplate() {\n    return (\n      `<input class=\"data__submit-button button\" type=\"submit\" value=\"Сгенерировать график\">`\n    );\n  }\n}\n","import {allCourses} from \"../data.js\";\nimport AbstractComponent from \"./abstract-component.js\";\n\nexport default class Statistics extends AbstractComponent {\n  constructor (courseType) {\n    super();\n\n    this._course = courseType;\n    this._courseProjects = allCourses[this._course];\n  }\n\n  getTemplate() {\n    const projectTemplate = this._courseProjects\n      .map((project) => {\n        return (\n          `<div class=\"data__statistics-group\">\n            <label class=\"data__project-name\" for=\"${project.value}\">${project.name}</label>\n            <input class=\"data__percentage-number\"\n            id=\"${project.value}\"\n            type=\"number\"\n            name=\"${project.value}\"\n            min=\"0\"\n            max=\"100\">\n            <span class=\"data__percentage-sign\">%</span>\n          </div>`\n        );\n      })\n      .join(`\\n`);\n\n    return (\n      `<fieldset class=\"data__statistics\">\n        ${projectTemplate}\n      </fieldset>`\n    );\n  }\n\n  getProjectsStatistics() {\n    const projectsWithData = this._courseProjects.slice();\n\n    for (const project of projectsWithData) {\n      const percentageInput = this.getElement().querySelector(`#${project.value}`);\n\n      project.percentage = percentageInput.value;\n    }\n\n    return projectsWithData;\n  }\n\n  reset() {\n    const projectsWithData = this.getProjectsStatistics();\n\n    for (const project of projectsWithData) {\n      project.percentage = null;\n    }\n  }\n}\n","export const GAP = 20;\nexport const MAX_PERCENTAGE = 100;\nexport const MIN_PERCENTAGE_FOR_RENDER = 15;\nexport const INITIAL_DPI = 96;\nexport const DEFAULT_COLOR = `#ffffff`;\n\nexport const BarCoordinate = {\n  INIT_X: 320,\n  INIT_Y: 60\n};\n\nexport const BarSize = {\n  MAX_WIDTH: 400,\n  HEIGHT: 50\n};\n\nexport const LabelCoordinate = {\n  INIT_X: 20,\n  INIT_Y: 90\n};\n\nexport const PercentageCoordinate = {\n  INIT_X: 330,\n  INIT_Y: 95\n}\n\nexport const Font = {\n  FAMILY: `Muller`,\n  SIZE: `25px`\n};\n","const html1Projects = [\n  {name: `Нёрдс`, value: `nerds`, color: `#94c4e0`},\n  {name: `Седона`, value: `sedona`, color: `#389c9c`},\n  {name: `Техномарт`, value: `technomart`, color: `#d6ae72`},\n  {name: `Глейси`, value: `gllacy`, color: `#997165`},\n  {name: `Девайс`, value: `device`, color: `#eb8888`}\n];\n\nconst html2Projects = [\n  {name: `Пинк`, value: `pink`, color: `#de739a`},\n  {name: `Седона`, value: `sedona`, color: `#69c2bc`},\n  {name: `Кэт энерджи`, value: `cat-energy`, color: `#eda15a`},\n  {name: `Мишка`, value: `mishka`, color: `#332b8f`},\n  {name: `Погнали`, value: `pognali`, color: `#e0d780`}\n];\n\nconst js1Projects = [\n  {name: `Кекстаграм`, value: `kekstagram`, color: `#7751e0`},\n  {name: `Кексобукинг`, value: `keksobooking`, color: `#789c78`}\n];\n\nconst js2Projects = [\n  {name: `Киноман`, value: `cinemaddict`, color: `#6393bf`},\n  {name: `Большое путешествие`, value: `big-trip`, color: `#e5c470`}\n];\n\nexport const allCourses = {\n  html1: html1Projects,\n  html2: html2Projects,\n  js1: js1Projects,\n  js2: js2Projects\n};\n","import {render, remove} from \"./utils.js\";\nimport {renderChart} from \"./chart-render.js\";\nimport StatisticsComponent from \"./components/statistics.js\";\nimport GenerateButtonComponent from \"./components/generate-button.js\";\nimport AlertComponent from \"./components/alert.js\";\n\nconst dataFormElement = document.querySelector(`.data__form`);\nconst coursesRadioButtons = dataFormElement\n  .querySelectorAll(`.data__course-selection-item[name=\"course\"]`);\n\nlet statisticsComponent = null;\nlet generateButtonComponent = null;\nlet alertComponent = null;\n\nfor (const button of coursesRadioButtons) {\n  button.addEventListener(`change`, () => {\n    statisticsComponent && remove(statisticsComponent);\n    generateButtonComponent && remove(generateButtonComponent);\n    alertComponent && remove(alertComponent);\n\n    statisticsComponent = new StatisticsComponent(button.value);\n    generateButtonComponent = new GenerateButtonComponent();\n\n    render(statisticsComponent, dataFormElement);\n    render(generateButtonComponent, dataFormElement);\n  });\n}\n\ndataFormElement.addEventListener(`submit`, (evt) => {\n  evt.preventDefault();\n\n  const projectsWithData = statisticsComponent.getProjectsStatistics();\n  const percentageSum = projectsWithData\n    .reduce((sum, current) => sum + Number(current.percentage), 0);\n\n  if (percentageSum !== 100) {\n\n\n    if (alertComponent) {\n      return;\n    }\n\n    alertComponent = new AlertComponent();\n    render(alertComponent, dataFormElement);\n\n    return;\n  }\n\n  renderChart(projectsWithData);\n  dataFormElement.reset();\n  statisticsComponent.reset();\n  remove(statisticsComponent);\n  remove(generateButtonComponent);\n  alertComponent && remove(alertComponent);\n});\n","export const createElement = (temlate) => {\n  const container = document.createElement(`div`);\n\n  container.innerHTML = temlate;\n\n  return container.firstChild;\n};\n\nexport const render = (component, container) => {\n  container.append(component.getElement());\n};\n\nexport const remove = (component) => {\n  component.getElement().remove();\n  component.removeElement();\n};\n"],"sourceRoot":""}